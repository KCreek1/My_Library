<!-- homepage of user to display their library of books-->
<!-- table copied from finance pset and refactored -->

{% extends 'layout.html' %}

{% block title %}My Library{% endblock %}

{% block content %}
  <h1>Reviews</h1>
  <p>Search for books by title, author, or series name</p>
<form action="{{ url_for('reviews') }}" method="post">
    <div class="mb-3">
        <select class="form-control mx-auto w-auto" name="selection">
            {% for value in select_value %}
                <option value="{{ value }}">{{ value }}</option>
            {% endfor %}
        </select>
    </div>
    <input type="text" name="value" placeholder="Title, Author, Genre, Rating, or Series">
    <button type="submit">Search</button>
</form>
  <table>
    <thead>
      <tr>
        <th style="width:20%">Title</th>
        <th style="width:10%">Author</th>
        <th style="width:5%">Year</th>
        <th style="width:10%">Series</th>
        <th style="width:10%">Genre</th>
        <th style="width:5%">Rating</th>
        <th style="width:30%">Review</th>
      </tr>
    </thead>
    <tbody>
      {% if results %}
        {% for review in results %}
          <tr>
            <td>{{ review.book.title }}</td>
            <td>{{ review.book.author }}</td>
            {% if review.book.year %}
              <td>{{ review.book.year }}</td>
            {% else %}
              <td>none</td>
            {% endif %}
            {% if review.book.series_name %}
              <td>{{ review.book.series_name }}</td>
            {% else %}
              <td>none</td>
            {% endif %}
            <td>{{ review.book.genre }}</td>
            {% if review.book.rating %}
              <td>{{ review.book.rating }}</td>
            {% else %}
              <td>none</td>
            {% endif %}
            {% if review.book.review %}
              <td>{{ review.book.review }}</td>
            {% else %}
              <td>none</td>
            {% endif %}
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="7">No results to display.</td>
          </tr>
        {% endif %} 
    </tbody>
  </table>
{% endblock %}